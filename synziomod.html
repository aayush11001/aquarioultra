

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>AQUARIO ULTRA</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@500&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary: #00f5ff;
            --secondary: #8a2be2;
            --accent: #ff1493;
            --dark: #0a0a0f;
            --card: rgba(15, 15, 25, 0.95);
            --glass: rgba(255, 255, 255, 0.03);
            --neon-blue: #00d4ff;
            --neon-purple: #b857ff;
            --neon-pink: #ff57b8;
            --success: #00ff7f;
            --danger: #ff4444;
            --warning: #ffd700;
            --border: rgba(0, 212, 255, 0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        body {
            font-family: 'Exo 2', sans-serif;
            background: var(--dark);
            color: #ffffff;
            overflow-x: hidden;
            min-height: 100vh;
            position: relative;
            will-change: transform;
            transform: translateZ(0);
        }

        .orbitron { font-family: 'Exo 2', sans-serif; }
        .rajdhani { font-family: 'Exo 2', sans-serif; }

        /* Performance Optimized Background */
        .cosmic-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            background: linear-gradient(45deg, #0a0a0f 0%, #1a0d2e 25%, #16213e 50%, #0f3460 75%, #0a0a0f 100%);
            background-size: 400% 400%;
            animation: cosmicMove 20s ease infinite;
            will-change: background-position;
            transform: translateZ(0);
        }

        @keyframes cosmicMove {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Hardware Accelerated Particles */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
            will-change: transform;
            transform: translateZ(0);
        }

        .particle {
            position: absolute;
            width: 2px;
            height: 2px;
            background: var(--primary);
            border-radius: 50%;
            animation: float 15s infinite linear;
            will-change: transform, opacity;
            transform: translateZ(0);
        }

        @keyframes float {
            0% {
                transform: translateY(100vh) rotate(0deg) translateZ(0);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) rotate(360deg) translateZ(0);
                opacity: 0;
            }
        }

        /* Optimized Popup System */
        .result-popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            z-index: 9999;
            display: none;
            align-items: center;
            justify-content: center;
            animation: overlayFadeIn 0.3s ease-out;
            will-change: opacity;
            transform: translateZ(0);
        }

        @keyframes overlayFadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .result-popup {
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.95), rgba(20, 20, 40, 0.95));
            border-radius: 30px;
            padding: clamp(40px, 8vw, 60px);
            text-align: center;
            position: relative;
            overflow: hidden;
            max-width: 90vw;
            max-height: 90vh;
            border: 3px solid;
            animation: popupBounceIn 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            will-change: transform;
            transform: translateZ(0);
        }

        @keyframes popupBounceIn {
            0% {
                transform: scale(0.3) rotate(-10deg) translateZ(0);
                opacity: 0;
            }
            50% {
                transform: scale(1.05) rotate(5deg) translateZ(0);
            }
            70% {
                transform: scale(0.9) rotate(-2deg) translateZ(0);
            }
            100% {
                transform: scale(1) rotate(0deg) translateZ(0);
                opacity: 1;
            }
        }

        .win-popup {
            border-color: var(--success);
            box-shadow: 0 0 100px rgba(0, 255, 127, 0.5);
        }

        .loss-popup {
            border-color: var(--danger);
            box-shadow: 0 0 100px rgba(255, 68, 68, 0.5);
        }

        .popup-icon {
            font-size: clamp(60px, 12vw, 100px);
            margin-bottom: 20px;
            animation: iconPulse 2s ease-in-out infinite;
            will-change: transform, filter;
            transform: translateZ(0);
        }

        .win-icon {
            color: var(--success);
            text-shadow: 0 0 30px var(--success);
        }

        .loss-icon {
            color: var(--danger);
            text-shadow: 0 0 30px var(--danger);
        }

        @keyframes iconPulse {
            0%, 100% {
                transform: scale(1) translateZ(0);
                filter: brightness(1);
            }
            50% {
                transform: scale(1.1) translateZ(0);
                filter: brightness(1.3);
            }
        }

        .popup-title {
            font-size: clamp(32px, 8vw, 56px);
            font-weight: 900;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: clamp(3px, 1vw, 6px);
            animation: titleGlow 2s ease-in-out infinite alternate;
            will-change: text-shadow;
        }

        .win-title {
            color: var(--success);
            text-shadow: 0 0 20px var(--success), 0 0 40px var(--success);
        }

        .loss-title {
            color: var(--danger);
            text-shadow: 0 0 20px var(--danger), 0 0 40px var(--danger);
        }

        @keyframes titleGlow {
            from {
                text-shadow: 0 0 20px currentColor, 0 0 40px currentColor;
            }
            to {
                text-shadow: 0 0 30px currentColor, 0 0 60px currentColor, 0 0 80px currentColor;
            }
        }

        .popup-message {
            font-size: clamp(14px, 3vw, 18px);
            margin-bottom: 30px;
            color: #ffffff;
            opacity: 0.9;
            line-height: 1.5;
        }

        .popup-close-btn {
            background: linear-gradient(45deg, var(--neon-purple), var(--neon-pink));
            border: none;
            color: white;
            padding: clamp(12px, 2vw, 15px) clamp(24px, 4vw, 30px);
            border-radius: 50px;
            font-size: clamp(14px, 2.5vw, 16px);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 2px;
            will-change: transform, box-shadow;
            transform: translateZ(0);
        }

        .popup-close-btn:hover {
            transform: translateY(-3px) translateZ(0);
            box-shadow: 0 10px 30px rgba(184, 87, 255, 0.4);
        }

        /* Optimized Confetti */
        .confetti {
            position: absolute;
            width: 8px;
            height: 8px;
            background: #f0f;
            animation: confettiFall 3s linear infinite;
            will-change: transform, opacity;
            transform: translateZ(0);
        }

        @keyframes confettiFall {
            0% {
                transform: translateY(-100vh) rotate(0deg) translateZ(0);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg) translateZ(0);
                opacity: 0;
            }
        }

        /* Glassmorphism with Performance */
        .glass-card {
            background: var(--glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border);
            border-radius: clamp(12px, 2vw, 20px);
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            will-change: transform;
            transform: translateZ(0);
        }

        .neon-card {
            background: var(--card);
            backdrop-filter: blur(15px);
            border: 1px solid var(--border);
            border-radius: clamp(12px, 2vw, 15px);
            box-shadow: 
                0 0 30px rgba(0, 212, 255, 0.2),
                inset 0 1px 0 rgba(0, 212, 255, 0.1);
            transition: all 0.3s ease;
            will-change: transform, box-shadow;
            transform: translateZ(0);
        }

        .neon-card:hover {
            transform: translateY(-5px) scale(1.02) translateZ(0);
            box-shadow: 
                0 0 50px rgba(0, 212, 255, 0.4),
                0 10px 40px rgba(0, 0, 0, 0.3);
            border-color: rgba(0, 212, 255, 0.6);
        }

        /* Optimized Neon Effects */
        .neon-text {
            color: var(--primary);
            text-shadow: 
                0 0 5px var(--primary),
                0 0 10px var(--primary),
                0 0 15px var(--primary);
            animation: neonPulse 2s ease-in-out infinite alternate;
            will-change: text-shadow;
        }

        .neon-text-purple {
            color: var(--neon-purple);
            text-shadow: 
                0 0 5px var(--neon-purple),
                0 0 10px var(--neon-purple),
                0 0 15px var(--neon-purple);
        }

        .neon-text-pink {
            color: var(--neon-pink);
            text-shadow: 
                0 0 5px var(--neon-pink),
                0 0 10px var(--neon-pink),
                0 0 15px var(--neon-pink);
        }

        @keyframes neonPulse {
            from {
                text-shadow: 
                    0 0 5px var(--primary),
                    0 0 10px var(--primary),
                    0 0 15px var(--primary);
            }
            to {
                text-shadow: 
                    0 0 2px var(--primary),
                    0 0 5px var(--primary),
                    0 0 8px var(--primary);
            }
        }

        /* High Performance Buttons */
        .cyber-btn {
            background: linear-gradient(45deg, var(--neon-purple), var(--neon-pink));
            border: 1px solid var(--neon-purple);
            color: white;
            padding: clamp(10px, 2vw, 12px) clamp(20px, 3vw, 24px);
            border-radius: clamp(6px, 1vw, 8px);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            box-shadow: 0 0 20px rgba(184, 87, 255, 0.3);
            cursor: pointer;
            will-change: transform, box-shadow;
            transform: translateZ(0);
        }

        .cyber-btn:hover {
            transform: translateY(-2px) translateZ(0);
            box-shadow: 0 0 30px rgba(184, 87, 255, 0.6);
        }

        .cyber-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
            will-change: left;
        }

        .cyber-btn:hover::before {
            left: 100%;
        }

        /* Optimized Select Elements */
        .holo-select {
            background: rgba(0, 212, 255, 0.1);
            border: 1px solid var(--neon-blue);
            border-radius: clamp(8px, 1.5vw, 10px);
            color: white;
            padding: clamp(10px, 2vw, 12px) clamp(14px, 2.5vw, 16px);
            font-size: clamp(12px, 2vw, 14px);
            transition: all 0.3s ease;
            box-shadow: 0 0 15px rgba(0, 212, 255, 0.2);
            will-change: border-color, box-shadow;
            transform: translateZ(0);
        }

        .holo-select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 25px rgba(0, 212, 255, 0.4);
        }

        .holo-select option {
            background: var(--dark);
            color: white;
        }

        /* Optimized Data Cards */
        .data-card {
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), rgba(184, 87, 255, 0.1));
            border: 1px solid var(--border);
            border-radius: clamp(10px, 2vw, 15px);
            padding: clamp(15px, 3vw, 20px);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            will-change: transform, border-color;
            transform: translateZ(0);
        }

        .data-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, var(--neon-blue), var(--neon-purple));
            transition: left 0.5s ease;
            will-change: left;
        }

        .data-card:hover::before {
            left: 100%;
        }

        .data-card:hover {
            transform: translateY(-3px) translateZ(0);
            border-color: rgba(0, 212, 255, 0.6);
            box-shadow: 0 10px 30px rgba(0, 212, 255, 0.2);
        }

        /* Optimized Progress Bar */
        .cyber-progress {
            width: 100%;
            height: clamp(6px, 1vw, 8px);
            background: rgba(0, 212, 255, 0.2);
            border-radius: 4px;
            overflow: hidden;
            position: relative;
            will-change: contents;
            transform: translateZ(0);
        }

        .cyber-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--neon-blue), var(--neon-purple));
            border-radius: 4px;
            transition: width 0.5s ease;
            position: relative;
            will-change: width;
            transform: translateZ(0);
        }

        .cyber-progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: progressShine 2s infinite;
            will-change: transform;
        }

        @keyframes progressShine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        /* Optimized Header */
        .cosmic-header {
            background: linear-gradient(135deg, rgba(0, 0, 15, 0.9), rgba(26, 13, 46, 0.9));
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border);
            position: relative;
            overflow: hidden;
            will-change: transform;
            transform: translateZ(0);
        }

        .cosmic-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent, rgba(0, 212, 255, 0.1), transparent);
            animation: headerShine 4s infinite;
            will-change: transform;
        }

        @keyframes headerShine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        /* Pattern Items */
        .pattern-item {
            background: linear-gradient(45deg, rgba(0, 212, 255, 0.2), rgba(184, 87, 255, 0.2));
            border: 1px solid var(--border);
            border-radius: clamp(6px, 1vw, 8px);
            padding: clamp(6px, 1vw, 8px) clamp(10px, 2vw, 12px);
            font-weight: 600;
            font-size: clamp(10px, 1.8vw, 12px);
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            will-change: transform;
            transform: translateZ(0);
        }

        .pattern-item:hover {
            transform: scale(1.1) translateZ(0);
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.4);
        }

        .pattern-item.highlight {
            background: linear-gradient(45deg, var(--neon-pink), var(--neon-purple));
            animation: patternPulse 1s infinite;
            will-change: opacity;
        }

        @keyframes patternPulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        /* Optimized History Cards */
        .history-card {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: clamp(10px, 2vw, 12px);
            padding: clamp(12px, 2.5vw, 16px);
            margin-bottom: clamp(8px, 1.5vw, 12px);
            transition: all 0.3s ease;
            position: relative;
            will-change: transform, border-color;
            transform: translateZ(0);
        }

        .history-card:hover {
            border-color: rgba(0, 212, 255, 0.5);
            transform: translateX(5px) translateZ(0);
            box-shadow: 0 5px 25px rgba(0, 212, 255, 0.2);
        }

        .history-card.win {
            border-color: rgba(0, 255, 127, 0.4);
            background: linear-gradient(135deg, rgba(0, 255, 127, 0.1), transparent);
        }

        .history-card.loss {
            border-color: rgba(255, 69, 0, 0.4);
            background: linear-gradient(135deg, rgba(255, 69, 0, 0.1), transparent);
        }

        .history-card.pending {
            border-color: rgba(255, 215, 0, 0.4);
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), transparent);
            animation: pendingPulse 2s infinite;
            will-change: opacity;
        }

        @keyframes pendingPulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }

        /* Optimized Loading Spinner */
        .loading-spinner {
            width: clamp(16px, 3vw, 20px);
            height: clamp(16px, 3vw, 20px);
            border: 2px solid rgba(0, 212, 255, 0.3);
            border-top: 2px solid var(--neon-blue);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            will-change: transform;
            transform: translateZ(0);
        }

        @keyframes spin {
            from { transform: rotate(0deg) translateZ(0); }
            to { transform: rotate(360deg) translateZ(0); }
        }

        /* Status Indicators */
        .status-online {
            width: clamp(6px, 1vw, 8px);
            height: clamp(6px, 1vw, 8px);
            background: var(--success);
            border-radius: 50%;
            animation: statusPulse 1.5s infinite;
            box-shadow: 0 0 10px var(--success);
            will-change: opacity, transform;
            transform: translateZ(0);
        }

        @keyframes statusPulse {
            0%, 100% { opacity: 1; transform: scale(1) translateZ(0); }
            50% { opacity: 0.5; transform: scale(1.2) translateZ(0); }
        }

        /* AI Specific */
        .ai-neural {
            background: linear-gradient(45deg, rgba(0, 255, 136, 0.2), rgba(0, 212, 255, 0.2));
            animation: neuralPulse 3s infinite;
            will-change: box-shadow;
        }

        @keyframes neuralPulse {
            0%, 100% { box-shadow: 0 0 20px rgba(0, 255, 136, 0.3); }
            50% { box-shadow: 0 0 40px rgba(0, 255, 136, 0.6); }
        }

        /* Settings Cards */
        .settings-card {
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), rgba(184, 87, 255, 0.1));
            border: 1px solid var(--border);
            border-radius: clamp(16px, 3vw, 20px);
            position: relative;
            overflow: hidden;
            will-change: transform;
            transform: translateZ(0);
        }

        .telegram-card {
            background: linear-gradient(135deg, rgba(0, 136, 204, 0.2), rgba(34, 158, 217, 0.2));
            border: 1px solid rgba(0, 136, 204, 0.4);
            border-radius: clamp(12px, 2vw, 16px);
            position: relative;
            overflow: hidden;
            will-change: transform;
            transform: translateZ(0);
        }

        .telegram-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(0, 212, 255, 0.1), transparent);
            animation: telegramGlow 3s infinite;
            will-change: transform;
        }

        @keyframes telegramGlow {
            0%, 100% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.1) rotate(180deg); }
        }

        /* Optimized Animations */
        .spin-slow {
            animation: spin 8s linear infinite;
            will-change: transform;
            transform: translateZ(0);
        }

        /* Responsive Design with Container Queries */
        .container {
            width: 100%;
            margin-left: auto;
            margin-right: auto;
            padding-left: clamp(1rem, 4vw, 2rem);
            padding-right: clamp(1rem, 4vw, 2rem);
        }

        /* Ultra-responsive breakpoints */
        @media (min-width: 640px) {
            .container { max-width: 640px; }
        }

        @media (min-width: 768px) {
            .container { max-width: 768px; }
        }

        @media (min-width: 1024px) {
            .container { max-width: 1024px; }
        }

        @media (min-width: 1280px) {
            .container { max-width: 1280px; }
        }

        @media (min-width: 1536px) {
            .container { max-width: 1536px; }
        }

        /* Mobile Optimizations */
        @media (max-width: 768px) {
            .cosmic-header h1 {
                font-size: clamp(2rem, 8vw, 3rem);
            }
            
            .data-card {
                padding: clamp(12px, 3vw, 15px);
            }
            
            .neon-card {
                margin-bottom: 1rem;
            }

            .result-popup {
                padding: clamp(30px, 6vw, 40px) clamp(15px, 4vw, 20px);
                margin: clamp(10px, 2vw, 15px);
            }

            .popup-title {
                font-size: clamp(24px, 8vw, 36px);
                letter-spacing: clamp(2px, 1vw, 4px);
            }

            .popup-icon {
                font-size: clamp(50px, 15vw, 80px);
            }

            .grid-cols-2 {
                grid-template-columns: 1fr;
            }
        }

        /* Tablet Optimizations */
        @media (min-width: 769px) and (max-width: 1024px) {
            .grid-cols-2 {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .md\\:grid-cols-3 {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .md\\:grid-cols-4 {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        /* Performance Critical Styles */
        .no-select {
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        .gpu-accelerated {
            will-change: transform;
            transform: translateZ(0);
            backface-visibility: hidden;
            perspective: 1000px;
        }

        /* Preload Critical Animations */
        .preload-anims {
            animation-play-state: paused;
        }

        /* Notification Optimization */
        .notification {
            background: rgba(15, 15, 25, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border);
            border-radius: clamp(10px, 2vw, 12px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            animation: notifSlide 0.5s ease;
            will-change: transform, opacity;
            transform: translateZ(0);
        }

        @keyframes notifSlide {
            from {
                transform: translateX(100%) translateZ(0);
                opacity: 0;
            }
            to {
                transform: translateX(0) translateZ(0);
                opacity: 1;
            }
        }

        /* Print Optimization */
        @media print {
            .cosmic-bg,
            .particles,
            .result-popup-overlay {
                display: none !important;
            }
        }

        /* Accessibility Improvements */
        @media (prefers-reduced-motion: reduce) {
            *,
            *::before,
            *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        /* Dark mode optimization */
        @media (prefers-color-scheme: dark) {
            :root {
                color-scheme: dark;
            }
        }

        /* High contrast mode */
        @media (prefers-contrast: high) {
            .neon-text,
            .neon-text-purple,
            .neon-text-pink {
                text-shadow: none;
                font-weight: bold;
            }
        }
    </style>
</head>
<body class="gpu-accelerated">
    <!-- Optimized Background -->
    <div class="cosmic-bg"></div>
    
    <!-- Optimized Particles -->
    <div class="particles" id="particles"></div>

    <!-- WIN/LOSS Popup Overlay -->
    <div id="resultPopupOverlay" class="result-popup-overlay">
        <div id="resultPopup" class="result-popup">
            <div id="celebrationBurst" class="celebration-burst"></div>
            <div id="popupIcon" class="popup-icon">
                <i class="fas fa-trophy"></i>
            </div>
            <h2 id="popupTitle" class="popup-title orbitron">WIN!</h2>
            <p id="popupMessage" class="popup-message rajdhani">Congratulations! Your prediction was correct!</p>
            <button id="popupCloseBtn" class="popup-close-btn" onclick="closeResultPopup()">
                <i class="fas fa-check mr-2"></i>
                CONTINUE
            </button>
        </div>
    </div>

    <!-- Optimized Header -->
    <header class="cosmic-header py-6 relative z-10">
        <div class="container mx-auto text-center relative z-20">
            <h1 class="orbitron text-4xl md:text-5xl lg:text-6xl font-black tracking-wider mb-2 neon-text">
                AQUARIO ULTRA
            </h1>
            <p class="rajdhani text-base md:text-lg text-cyan-300 tracking-widest font-semibold">
                ULTIMATE PREDICTION PANEL
            </p>
            <div class="flex justify-center items-center mt-4 space-x-4">
                <div class="status-online"></div>
                <span class="text-xs md:text-sm neon-text-purple rajdhani">NEURAL NETWORK ACTIVE</span>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="container mx-auto py-6 max-w-7xl relative z-10">
        <!-- Control Panel -->
        <div class="neon-card p-4 md:p-6 mb-6">
            <h2 class="text-lg md:text-xl font-bold text-white mb-4 flex items-center neon-text-purple">
                <i class="fas fa-cog mr-3 spin-slow"></i>
                CONTROL PANEL
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
                <div>
                    <label class="block text-xs md:text-sm font-semibold text-cyan-300 mb-2 md:mb-3 rajdhani tracking-wider">RESULT TYPE</label>
                    <select id="resultType" class="holo-select w-full" onchange="resetServerSelection()">
                        <option value="bigsmall">BIG/SMALL</option>
                        <option value="redgreen">RED/GREEN</option>
                    </select>
                </div>
                <div>
                    <label class="block text-xs md:text-sm font-semibold text-cyan-300 mb-2 md:mb-3 rajdhani tracking-wider">SERVER ENGINE</label>
                    <select id="serverSelect" class="holo-select w-full" onchange="updateServerSelection()">
                        <option value="">SELECT ENGINE</option>
                        <option value="bn">PHEONIX AI</option>
                        <option value="aeroxtreme">AERO XTREME</option>
                        <option value="quantomai">QUANTOM AI</option>
                    </select>
                </div>
            </div>
        </div>
      
      <!-- QUANTOM AI Container -->
<div id="quantomAIContainer" class="neon-card p-4 md:p-6 mb-6 hidden">
    <h2 class="text-lg md:text-xl font-bold text-white mb-4 flex items-center neon-text">
        <i class="fas fa-robot mr-3"></i>
        QUANTOM AI
    </h2>

    <div class="mb-4">
    <label class="block text-sm text-cyan-300 mb-2">
        <i class="fas fa-bolt mr-2 text-purple-400"></i>
        ENTER LAST 3 DIGITS
    </label>
    <input id="quantomInput" type="text" maxlength="3" class="holo-select w-full" placeholder="e.g. 123">
</div>

<div class="mb-4">
    <label class="block text-sm text-cyan-300 mb-2">
        <i class="fas fa-list-ol mr-2 text-purple-400"></i>
        SELECT NUMBER OF PREDICTIONS
    </label>
    <select id="predictionCount" class="holo-select w-full">
        <option value="">SELECT</option>
        <option value="5">5</option>
        <option value="10">10</option>
        <option value="15">15</option>
        <option value="20">20</option>
    </select>
</div>


    <button onclick="generateQuantomPrediction()" class="cyber-btn mt-2">
        <i class="fas fa-brain mr-2"></i> GET PREDICTION
    </button>

    <div id="quantomResult" class="mt-6 text-cyan-300 rajdhani space-y-2"></div>
</div>



        <!-- Info Matrix -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6 mb-6">
            <div class="glass-card p-4 md:p-6">
    <div class="flex items-center justify-between">
        <div>
            <p class="text-xs text-cyan-300 uppercase tracking-wide rajdhani">PERIOD</p>
            <p id="periodNumber" class="text-lg md:text-2xl font-bold neon-text">LOADING...</p>
        </div>
        <div class="w-10 h-10 md:w-12 md:h-12 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center">
            <i class="fas fa-calendar text-white text-lg md:text-xl"></i>
        </div>
    </div>
</div>

            
            <div class="glass-card p-4 md:p-6">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-xs text-cyan-300 uppercase tracking-wide rajdhani">TIME LEFT</p>
                        <p id="timer" class="text-lg md:text-2xl font-bold neon-text-purple">00:00</p>
                    </div>
                    <div class="w-10 h-10 md:w-12 md:h-12 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center">
                        <i class="fas fa-hourglass-half text-white text-lg md:text-xl"></i>
                    </div>
                </div>
            </div>
            
            <div class="glass-card p-4 md:p-6">
    <div class="flex items-center justify-between">
        <div>
            <p class="text-xs text-cyan-300 uppercase tracking-wide rajdhani">PREDICTION</p>
            <p id="currentResult" class="text-sm md:text-lg font-bold neon-text-pink">WAITING...</p>
        </div>
        <div class="w-10 h-10 md:w-12 md:h-12 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center">
            <i class="fas fa-rocket text-white text-lg md:text-xl"></i>
        </div>
    </div>
</div>

            </div>
        </div>
      
      <!-- Prediction History Section -->
<div class="neon-card p-4 md:p-6 mb-6">
    <h2 class="text-lg md:text-xl font-bold text-white mb-4 flex items-center neon-text-pink">
        <i class="fas fa-history mr-3"></i>
        PREDICTION HISTORY
    </h2>
    <div id="historyBody">
        <!-- History will be dynamically rendered here by renderHistory() -->
    </div>
</div>



        <!-- Settings Section -->
        <div class="settings-card p-4 md:p-6 mb-6">
            <h2 class="text-lg md:text-xl font-bold text-white mb-4 md:mb-6 flex items-center neon-text">
                <i class="fas fa-cog mr-3 spin-slow"></i>
                SETTINGS
            </h2>
            
            <!-- Telegram Channel Section -->
            <div class="mb-6 md:mb-8">
                <h3 class="text-base md:text-lg font-bold text-white mb-4 md:mb-6 flex items-center neon-text-purple">
                    <i class="fab fa-telegram mr-3"></i>
                    TELEGRAM
                </h3>
                <div class="telegram-card p-6 md:p-8 text-center relative z-10">
                    <i class="fab fa-telegram text-4xl md:text-6xl mb-4 md:mb-6 neon-text"></i>
                    <h4 class="text-xl md:text-2xl font-bold mb-3 md:mb-4 neon-text-purple orbitron">TEAM SYNZIO MODS</h4>
                    <p class="text-cyan-300 mb-3 md:mb-4 rajdhani text-sm md:text-lg">TELEGRAM BEST HACK MODS</p>
                    <p class="text-cyan-300 mb-4 md:mb-6 rajdhani text-xs md:text-sm">JOIN OUR OFFICIAL TELEGRAM CHANNEL</p>
                    <a href="https://t.me/+zpI5p68mZqZkNTFl" target="_blank" class="cyber-btn inline-flex items-center text-sm md:text-base">
                        <i class="fab fa-telegram mr-2 md:mr-3"></i>
                        JOIN CHANNEL
                    </a>
                </div>
            </div>

            <!-- About Section -->
            <div>
                <h3 class="text-base md:text-lg font-bold text-white mb-4 md:mb-6 flex items-center neon-text-pink">
                    <i class="fas fa-info-circle mr-3"></i>
                    SYSTEM INFORMATION
                </h3>
                <div class="glass-card p-6 md:p-8">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8">
                        <div class="text-center">
                            <i class="fas fa-crown text-3xl md:text-5xl mb-3 md:mb-4 text-yellow-400" style="text-shadow: 0 0 20px #ffd700;"></i>
                            <h4 class="text-lg md:text-xl font-bold mb-2 md:mb-3 neon-text orbitron">TEAM SYNZIO MODS</h4>
                            <p class="text-cyan-300 rajdhani text-xs md:text-sm">ULTIMATE PREDICTION SYSTEM WITH ADVANCED AI</p>
                        </div>
                        <div class="text-center">
                            <i class="fas fa-user-crown text-3xl md:text-5xl mb-3 md:mb-4 text-yellow-400" style="text-shadow: 0 0 20px #ffd700;"></i>
                            <h4 class="text-lg md:text-xl font-bold mb-2 md:mb-3 neon-text orbitron">OWNER</h4>
                            <p class="text-cyan-300 rajdhani text-sm md:text-lg">@Synzio005</p>
                            <div class="mt-3 md:mt-4">
                                <span class="bg-gradient-to-r from-purple-600 to-pink-600 px-3 md:px-4 py-1 md:py-2 rounded-full text-xs md:text-sm font-semibold">OFFICIAL DEVELOPER</span>
                            </div>
                        </div>
                    </div>
                    <div class="text-center mt-6 md:mt-8 pt-4 md:pt-6 border-t border-cyan-500 border-opacity-30">
                        <p class="text-cyan-300 rajdhani text-xs md:text-sm">
                            <i class="fas fa-shield-alt mr-2 neon-text"></i>
                            SECURE • RELIABLE • ADVANCED TECHNOLOGY
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Break Popup -->
    <div id="breakOverlay" class="fixed inset-0 bg-black bg-opacity-80 z-50 hidden flex items-center justify-center backdrop-blur-sm">
        <div id="breakPopup" class="glass-card p-6 md:p-8 mx-4 max-w-md text-center">
            <i class="fas fa-exclamation-triangle text-4xl md:text-6xl mb-4 md:mb-6 text-yellow-400" style="text-shadow: 0 0 20px #ffd700;"></i>
            <h3 class="text-xl md:text-2xl font-bold text-white mb-3 md:mb-4 neon-text orbitron">TAKE A BREAK</h3>
            <p class="text-cyan-300 mb-4 md:mb-6 rajdhani text-sm md:text-base">PLEASE WAIT 20-25 MINUTES BEFORE CONTINUING</p>
            <button onclick="closeBreakPopup()" class="cyber-btn text-sm md:text-base">
                <i class="fas fa-check mr-2"></i>
                ACKNOWLEDGED
            </button>
        </div>
    </div>

    <!-- Notification Container -->
    <div id="notificationContainer" class="fixed top-4 right-4 z-40 space-y-4"></div>

    <script>
        // Performance Optimized Script with Lazy Loading and Hardware Acceleration

        // Initialize performance monitoring
        const perfMonitor = {
            start: performance.now(),
            marks: {},
            mark: function(name) {
                this.marks[name] = performance.now();
            },
            measure: function(name, start) {
                return performance.now() - (this.marks[start] || this.start);
            }
        };

        // Audio Context for Sound Effects (Lazy Loaded)
        let audioContext;
        let soundsLoaded = false;

        function initAudio() {
            if (!audioContext && !soundsLoaded) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
                soundsLoaded = true;
            }
        }

        function createOptimizedSound(frequencies, duration = 0.5) {
            if (!audioContext) return;
            
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            frequencies.forEach((freq, index) => {
                oscillator.frequency.setValueAtTime(freq, audioContext.currentTime + (index * 0.1));
            });
            
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + duration);
        }

        function speakResult(text) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.volume = 0.7;
                utterance.rate = 1.1;
                utterance.pitch = 1.0;
                speechSynthesis.speak(utterance);
            }
        }

        // Optimized Confetti with Object Pooling
        const confettiPool = [];
        const MAX_CONFETTI = 30;

        function createOptimizedConfetti() {
            const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#feca57', '#ff9ff3', '#f368e0'];
            const confettiContainer = document.getElementById('resultPopup');
            
            for (let i = 0; i < MAX_CONFETTI; i++) {
                let confetti = confettiPool[i];
                if (!confetti) {
                    confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confettiPool[i] = confetti;
                }
                
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.animationDelay = Math.random() * 3 + 's';
                confetti.style.animationDuration = (Math.random() * 2 + 2) + 's';
                confettiContainer.appendChild(confetti);
                
                setTimeout(() => {
                    if (confetti.parentNode) {
                        confetti.parentNode.removeChild(confetti);
                    }
                }, 4000);
            }
        }

        // Optimized Popup System
        function showResultPopup(isWin, prediction, actual, probability) {
            perfMonitor.mark('popup-start');
            initAudio();
            
            const elements = {
                overlay: document.getElementById('resultPopupOverlay'),
                popup: document.getElementById('resultPopup'),
                icon: document.getElementById('popupIcon'),
                title: document.getElementById('popupTitle'),
                message: document.getElementById('popupMessage'),
                burst: document.getElementById('celebrationBurst')
            };
            
            // Batch DOM updates
            requestAnimationFrame(() => {
                // Reset classes efficiently
                elements.popup.className = `result-popup ${isWin ? 'win-popup' : 'loss-popup'}`;
                elements.icon.className = `popup-icon ${isWin ? 'win-icon' : 'loss-icon'}`;
                elements.title.className = `popup-title orbitron ${isWin ? 'win-title' : 'loss-title'}`;
                elements.burst.className = `celebration-burst ${isWin ? 'win-burst' : 'loss-burst'}`;
                
                elements.icon.innerHTML = `<i class="fas fa-${isWin ? 'trophy' : 'times-circle'}"></i>`;
                elements.title.textContent = isWin ? 'VICTORY!' : 'DEFEAT';
                elements.message.textContent = isWin ? 
                    `🎉 PREDICTION: ${prediction} | RESULT: ${actual} | ACCURACY: ${probability}% 🎉` :
                    `❌ PREDICTION: ${prediction} | RESULT: ${actual} | TRY AGAIN! ❌`;
                
                elements.overlay.style.display = 'flex';
                
                if (isWin) {
                    setTimeout(createOptimizedConfetti, 100);
                    createOptimizedSound([523.25, 659.25, 783.99, 1046.50]);
                    speakResult('WIN');
                } else {
                    createOptimizedSound([220, 196, 174.61, 146.83], 0.4);
                    speakResult('LOSS');
                }
                
                // Auto close
                setTimeout(closeResultPopup, 5000);
                
                perfMonitor.mark('popup-end');
            });
        }

        function closeResultPopup() {
            const overlay = document.getElementById('resultPopupOverlay');
            overlay.style.display = 'none';
        }

        // Optimized Particle System with RequestAnimationFrame
        let particleCount = 0;
        const MAX_PARTICLES = window.innerWidth < 768 ? 25 : 50;

        function createOptimizedParticles() {
            const particlesContainer = document.getElementById('particles');
            const colors = ['#00ffff', '#8a2be2', '#ff1493', '#00d4ff', '#b857ff'];

            function createParticle() {
                if (particleCount >= MAX_PARTICLES) return;
                
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 15 + 's';
                particle.style.animationDuration = (Math.random() * 8 + 8) + 's';
                
                const color = colors[Math.floor(Math.random() * colors.length)];
                particle.style.background = color;
                particle.style.boxShadow = `0 0 8px ${color}`;
                
                particlesContainer.appendChild(particle);
                particleCount++;
                
                // Clean up after animation
                setTimeout(() => {
                    if (particle.parentNode) {
                        particle.parentNode.removeChild(particle);
                        particleCount--;
                    }
                }, 15000);
            }

            // Create particles with controlled timing
            let particlesCreated = 0;
            const interval = setInterval(() => {
                createParticle();
                particlesCreated++;
                if (particlesCreated >= MAX_PARTICLES) {
                    clearInterval(interval);
                }
            }, 300);
        }

        // Efficient DOM Cache
        const domCache = {};
        function $(id) {
            if (!domCache[id]) {
                domCache[id] = document.getElementById(id);
            }
            return domCache[id];
        }

        // Global Variables (Optimized)
        const state = {
            lastPeriodNumber: null,
            history: [],
            currentResult: null,
            pendingResult: null,
            stats: { winCount: 0, lossStreak: 0, totalBets: 0, totalWins: 0, totalLosses: 0 },
            isResultProcessing: false,
            selectedServer: '',
            lastTimerUpdate: 0,
            cachedData: [],
            lastResults: { bigsmall: [], redgreen: [] },
            patternHistory: [],
            currentPattern: null,
            patternConfidence: 0,
            ai: { neuralScore: 0, learningRate: 0, confidence: 0, trainingData: [], weights: { big: 0.5, small: 0.5, red: 0.5, green: 0.5 } }
        };

        // Optimized Server Selection
        function resetServerSelection() {
            $('serverSelect').value = '';
            state.selectedServer = '';
            $('currentResult').textContent = 'WAITING FOR SERVER...';
            $('aiAnalysisPanel').style.display = 'none';
            updatePatternDisplay();
        }

        function updateServerSelection() {
    const server = $('serverSelect').value;
    state.selectedServer = server;

    // Hide/show containers
    const isQuantom = server === 'quantomai';
    $('quantomAIContainer').classList.toggle('hidden', !isQuantom);

    // Hide all other containers if QUANTOM AI selected
    const toToggle = ['periodNumber', 'timer', 'currentResult', 'historyBody', 'settingsCard'];
    toToggle.forEach(id => {
        const el = document.getElementById(id)?.closest('.glass-card') || document.getElementById(id)?.closest('.neon-card') || document.getElementById(id)?.closest('.settings-card');
        if (el) el.style.display = isQuantom ? 'none' : '';
    });

    if (!isQuantom && server && state.lastPeriodNumber) {
        generateResult(state.lastPeriodNumber);
    } else if (!server) {
        $('currentResult').textContent = 'WAITING FOR SERVER...';
    }
}


        // High-Performance Timer with RAF
        let timerRAF;
        function updatePeriodAndTimer() {
            const now = new Date();
            const currentTime = now.getTime();

            if (currentTime - state.lastTimerUpdate < 1000) {
                timerRAF = requestAnimationFrame(updatePeriodAndTimer);
                return;
            }
            state.lastTimerUpdate = currentTime;

            now.setUTCSeconds(now.getUTCSeconds());
            const year = now.getUTCFullYear();
            const month = String(now.getUTCMonth() + 1).padStart(2, '0');
            const day = String(now.getUTCDate()).padStart(2, '0');
            const totalMinutes = now.getUTCHours() * 60 + now.getUTCMinutes();

            const periodNumber = `${year}${month}${day}1000${10001 + totalMinutes}`;
            const remainingSeconds = 60 - now.getUTCSeconds();

            if (state.lastPeriodNumber !== periodNumber) {
                if (state.pendingResult && state.lastPeriodNumber) {
                    checkPendingResult(state.lastPeriodNumber).catch(err => console.error('Pending result check failed:', err));
                }
                state.lastPeriodNumber = periodNumber;
                $('periodNumber').textContent = periodNumber || 'N/A';
                if (state.selectedServer) {
                    generateResult(periodNumber);
                } else {
                    $('currentResult').textContent = 'WAITING FOR SERVER...';
                }
            }

            $('timer').textContent = `00:${String(remainingSeconds).padStart(2, '0')}`;
            timerRAF = requestAnimationFrame(updatePeriodAndTimer);
        }

        // Optimized API with Connection Pooling - UPDATED API ENDPOINT
        const apiCache = new Map();
        const CACHE_DURATION = 30000; // 30 seconds

        async function fetchOptimizedPage(page) {
            const cacheKey = `page-${page}`;
            const cached = apiCache.get(cacheKey);
            
            if (cached && Date.now() - cached.timestamp < CACHE_DURATION) {
                return cached.data;
            }
            
            try {
                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), 10000); // 10s timeout
                
                const response = await fetch("https://ckyjgfr.com/api/webapi/GetNoaverageEmerdList", {
                    method: "POST",
                    headers: { 
                        "Content-Type": "application/json",
                        "Cache-Control": "no-cache"
                    },
                    body: JSON.stringify({
                        pageSize: 10,
                        pageNo: page,
                        typeId: 1,
                        language: 0,
                        random: "fcc5f4ef6583416ab2439096e1c67c62",
                        signature: "B24ACE2541B8C543DF6F20ACEE7E3EBE",
                        timestamp: Math.floor(Date.now() / 1000)
                    }),
                    signal: controller.signal
                });
                
                clearTimeout(timeoutId);
                
                if (!response.ok) throw new Error(`HTTP error! Status: ${response.status}`);
                const data = await response.json();
                const result = data?.data?.list || [];
                
                apiCache.set(cacheKey, {
                    data: result,
                    timestamp: Date.now()
                });
                
                return result;
            } catch (error) {
                console.error(`Error fetching page ${page}:`, error);
                return [];
            }
        }

        async function fetchOptimizedData(maxPages = 10) {
            const cacheKey = 'optimized-data';
            const cached = apiCache.get(cacheKey);
            
            if (cached && Date.now() - cached.timestamp < CACHE_DURATION && cached.data.length >= 100) {
                return cached.data.slice(0, 100);
            }

            try {
                const promises = Array.from({length: maxPages}, (_, i) => fetchOptimizedPage(i + 1));
                const results = await Promise.allSettled(promises);
                
                const allData = results
                    .filter(result => result.status === 'fulfilled')
                    .flatMap(result => result.value);
                
                state.cachedData = allData;
                
                apiCache.set(cacheKey, {
                    data: allData,
                    timestamp: Date.now()
                });
                
                return allData.slice(0, 100);
            } catch (error) {
                console.error('Error fetching optimized data:', error);
                return state.cachedData.slice(0, 100) || [];
            }
        }
      
     async function aeroxtreme(resultType) {
    const data = await fetchOptimizedData();
    const history = data.length ? data.map(item => parseInt(item.number, 10) % 10) : [];

    function ultraAIPredict(history) {
        if (!Array.isArray(history) || history.length < 4) {
            const prediction = Math.random() > 0.5
                ? (resultType === 'bigsmall' ? 'BIG' : 'RED')
                : (resultType === 'bigsmall' ? 'SMALL' : 'GREEN');

            return {
                prediction,
                confidence: 85 + Math.floor(Math.random() * 13),
                reason: "Insufficient data → fallback prediction",
                logic: 5000
            };
        }

        const last10 = history.slice(0, 10);

        let groupA, groupB;
        if (resultType === 'bigsmall') {
            groupA = last10.filter(n => n >= 5).length; // BIG
            groupB = last10.filter(n => n < 5).length;  // SMALL
        } else {
            groupA = last10.filter(n => [0, 2, 4, 6, 8].includes(n)).length; // RED (even)
            groupB = last10.filter(n => [1, 3, 5, 7, 9].includes(n)).length; // GREEN (odd)
        }

        const lastThree = last10.slice(0, 3);
        const isSameGroup = lastThree.every(n =>
            resultType === 'bigsmall'
                ? (n >= 5) === (lastThree[0] >= 5)
                : ([0, 2, 4, 6, 8].includes(n)) === ([0, 2, 4, 6, 8].includes(lastThree[0]))
        );

        const avg = last10.reduce((sum, n) => sum + n, 0) / last10.length;
        const deviation = Math.abs(last10[0] - avg);

        let prediction = resultType === 'bigsmall' ? 'BIG' : 'RED';
        let reason = '';
        let logic = 7777;

        if (isSameGroup) {
            prediction = resultType === 'bigsmall'
                ? (lastThree[0] >= 5 ? 'SMALL' : 'BIG')
                : ([0, 2, 4, 6, 8].includes(lastThree[0]) ? 'GREEN' : 'RED');
            reason = `3-same streak detected → Reversing`;
            logic = 8888;
        } else if (deviation > 4) {
            prediction = resultType === 'bigsmall'
                ? (last10[0] >= 5 ? 'SMALL' : 'BIG')
                : ([0, 2, 4, 6, 8].includes(last10[0]) ? 'GREEN' : 'RED');
            reason = `Outlier deviation Δ${deviation.toFixed(2)} → Switching side`;
            logic = 5000;
        } else if (groupA > groupB) {
            prediction = resultType === 'bigsmall' ? 'SMALL' : 'GREEN';
            reason = `Trend: GroupA=${groupA} > GroupB=${groupB} → Flipping to GroupB`;
        } else {
            prediction = resultType === 'bigsmall' ? 'BIG' : 'RED';
            reason = `Trend: GroupB=${groupB} >= GroupA=${groupA} → Choosing GroupA`;
        }

        return {
            prediction,
            confidence: 85 + Math.floor(Math.random() * 13),
            reason,
            logic
        };
    }

    const resultData = ultraAIPredict(history);
    return {
        result: resultData.prediction,
        probability: resultData.confidence
    };
}

async function bn(type = 'bigsmall') {
    const latest = state.lastPeriodNumber || Math.floor(100 + Math.random() * 900);
    const digits = latest.toString().split('').map(Number);
    const sum = digits.reduce((a, b) => a + b, 0);
    const lastDigit = digits[digits.length - 1];
    const even = digits.filter(n => n % 2 === 0).length;
    const odd = digits.length - even;

    let result = '';
    let probability = 0;

    if (type === 'bigsmall') {
        let weight = 0;

        // Dynamic weight based on input pattern
        weight += (lastDigit >= 5 ? 1.2 : -1);
        weight += (sum >= 15 ? 1 : -0.5);
        weight += (odd > even ? 1 : -0.5);

        const bias = weight + Math.random() * 2 - 1; // slight randomness
        const isBig = bias >= 1;

        result = isBig ? 'BIG' : 'SMALL';
        probability = Math.floor(85 + Math.random() * 10); // 85–95%
    } else if (type === 'redgreen') {
        let weight = 0;

        // Similar logic for RED/GREEN
        weight += (sum % 2 === 0 ? 1 : -1);
        weight += (even >= 2 ? 1 : -1);
        weight += (lastDigit % 2 === 0 ? -0.5 : 0.5);

        const bias = weight + Math.random() * 2 - 1;
        const isRed = bias >= 1;

        result = isRed ? 'RED' : 'GREEN';
        probability = Math.floor(86 + Math.random() * 9); // 86–94%
    }

    // LOSS PREVENTION LOGIC: No more than 3 losses in a row
    if (state.serverStreaks?.bn >= 3) {
        // Force reversal after 3 losses
        if (type === 'bigsmall') {
            result = result === 'BIG' ? 'SMALL' : 'BIG';
        } else {
            result = result === 'RED' ? 'GREEN' : 'RED';
        }
        probability = 95; // boost confidence
        console.warn('[PHEONIX AI] Prediction reversed due to loss streak.');
        state.serverStreaks.bn = 0; // reset streak
    }

    return { result, probability };
}


  
       
        // Optimized Result Generation
        async function generateResult(period) {
            if (state.isResultProcessing || !state.selectedServer || !period) {
                $('currentResult').textContent = !state.selectedServer ? 'WAITING FOR SERVER...' : 'PERIOD NOT AVAILABLE';
                return;
            }
            
            state.isResultProcessing = true;
            $('currentResult').innerHTML = '<div class="loading-spinner mx-auto"></div>';

            const resultType = $('resultType').value || 'bigsmall';
            let prediction;

            try {
                const startTime = performance.now();
                
                switch (state.selectedServer) {
                    case 'guaranteedWin': prediction = await guaranteedWinServerMethod(resultType, period); break;
                    case 'bn': prediction = await bn(resultType); break;
                    case 'bnRepeat': prediction = await bnRepeat(resultType); break;
                    case 'ai': prediction = await aiAdvancedRandom(resultType); break;
                    case 'aeroxtreme': prediction = await aeroxtreme(resultType); break;
                    default: prediction = { result: "NO ENGINE SELECTED", probability: 0 };
                }

                const elapsed = performance.now() - startTime;
                const delay = Math.max(0, 1500 - elapsed);
                await new Promise(resolve => setTimeout(resolve, delay));

                const displayText = `${prediction.result} (${prediction.probability}%)`;
                $('currentResult').textContent = displayText;
                state.currentResult = prediction.result;

                if (prediction.result !== "AWAITING NEXT CYCLE") {
                    const historyEntry = { 
                        period, 
                        result: prediction.result, 
                        status: "Pending",
                        resultType,
                        server: state.selectedServer,
                        probability: prediction.probability
                    };
                    
                    state.history.unshift(historyEntry);
                    state.pendingResult = state.history[0];
                    state.lastResults[resultType].unshift(prediction.result);
                    if (state.lastResults[resultType].length > 5) state.lastResults[resultType].pop();
                }
                renderHistory();
            } catch (error) {
                console.error("Error in generateResult:", error);
                $('currentResult').textContent = 'PREDICTION ERROR';
            } finally {
                state.isResultProcessing = false;
            }
        }

        // Optimized API Result Fetching - UPDATED API ENDPOINT
        async function fetchGameResult(period) {
            try {
                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), 8000);
                
                const response = await fetch("https://ckyjgfr.com/api/webapi/GetNoaverageEmerdList", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({
                        pageSize: 10,
                        pageNo: 1,
                        typeId: 1,
                        language: 0,
                        random: "fcc5f4ef6583416ab2439096e1c67c62",
                        signature: "B24ACE2541B8C543DF6F20ACEE7E3EBE",
                        timestamp: Math.floor(Date.now() / 1000)
                    }),
                    signal: controller.signal
                });

                clearTimeout(timeoutId);
                
                if (!response.ok) throw new Error(`HTTP error! Status: ${response.status}`);
                const data = await response.json();
                const latestResult = data?.data?.list?.find(item => item.issueNumber === period);
                
                if (latestResult) {
                    const actualNumber = parseInt(latestResult.number, 10) % 10;
                    return { 
                        period: latestResult.issueNumber, 
                        result: actualNumber,
                        actualResult: actualNumber >= 5 ? 'BIG' : 'SMALL',
                        colorResult: [0, 2, 4, 6, 8].includes(actualNumber) ? 'RED' : 'GREEN'
                    };
                }
                return null;
            } catch (error) {
                console.error(`Error fetching game result for period ${period}:`, error);
                return null;
            }
        }

        // Optimized Pending Result Check
        async function checkPendingResult(period) {
            if (!state.pendingResult || state.pendingResult.period !== period) return;

            const apiResult = await fetchGameResult(period);
            if (apiResult && apiResult.period === period) {
                let isWin = false;
                
                if (state.pendingResult.resultType === 'bigsmall') {
                    isWin = state.pendingResult.result === apiResult.actualResult;
                } else if (state.pendingResult.resultType === 'redgreen') {
                    isWin = state.pendingResult.result === apiResult.colorResult;
                }

                state.pendingResult.status = isWin ? "WIN" : "LOSS";
                state.pendingResult.apiResult = state.pendingResult.resultType === 'bigsmall' 
                    ? apiResult.actualResult 
                    : apiResult.colorResult;

                // AI Learning optimization
                if (state.selectedServer === 'ai') {
                    state.ai.trainingData.push({
                        prediction: state.pendingResult.result,
                        actual: state.pendingResult.apiResult,
                        isWin: isWin,
                        period: period
                    });
                    
                    if (state.ai.trainingData.length > 30) {
                        state.ai.trainingData = state.ai.trainingData.slice(-30);
                    }
                }

                // Show optimized popup
                showResultPopup(isWin, state.pendingResult.result, state.pendingResult.apiResult, state.pendingResult.probability);

                if (isWin) {
                    state.stats.winCount++;
                    state.stats.lossStreak = 0;
                } else {
                    state.stats.lossStreak++;
                    state.stats.winCount = 0;
                }

                updateAnalysis(state.pendingResult.status);
                renderHistory();
                state.pendingResult = null;

                if (state.stats.winCount >= 25 || state.stats.lossStreak >= 2) {
                    setTimeout(() => showBreakPopup(), 2500);
                }
            }
        }

        // Optimized Break Popup
        function showBreakPopup() {
            $('breakOverlay').classList.remove('hidden');
            setTimeout(() => {
                closeBreakPopup();
                state.stats.winCount = 0;
                state.stats.lossStreak = 0;
            }, 90000);
        }

        function closeBreakPopup() {
            $('breakOverlay').classList.add('hidden');
        }

        // High-Performance History Rendering
        function renderHistory() {
            const historyBody = $('historyBody');
            if (!historyBody) return;
            
            if (state.history.length === 0) {
                historyBody.innerHTML = `
                    <div class="text-center text-cyan-300 py-8 md:py-12">
                        <i class="fas fa-chart-line text-3xl md:text-5xl mb-3 md:mb-4 neon-text"></i>
                        <p class="rajdhani text-sm md:text-lg">NO PREDICTIONS YET. SELECT AN ENGINE TO START.</p>
                    </div>
                `;
                return;
            }

            const fragment = document.createDocumentFragment();
            const recentHistory = state.history.slice(0, 10); // Limit for performance
            
            recentHistory.forEach(h => {
                const div = document.createElement('div');
                div.className = `history-card ${h.status.toLowerCase()}`;
                
                const serverNames = {
                    'bnRepeat': 'BN REPEAT MATRIX',
                    'ai': 'AI QUANTUM ENGINE',
                    'bn': 'PHEONIX AI',
                    'guaranteedWin': 'GUARANTEED WIN'
                };
                
                const serverColors = {
                    'bnRepeat': 'neon-text-purple',
                    'ai': 'neon-text',
                    'bn': 'text-white',
                    'guaranteedWin': 'text-yellow-400'
                };
                
                div.innerHTML = `
    <div class="space-y-2 md:space-y-3">
        <div class="flex items-center text-xs md:text-sm text-cyan-300">
            <i class="fas fa-calendar mr-2 neon-text"></i>
            PERIOD : <span class="font-bold ml-2 text-white">${h.period || 'N/A'}</span>
        </div>
        <div class="flex items-center text-xs md:text-sm text-cyan-300">
            <i class="fas fa-server mr-2 neon-text"></i>
            ENGINE : <span class="font-bold ml-2">${serverNames[h.server] || h.server || 'UNKNOWN'}</span>
        </div>
        <div class="flex items-center text-xs md:text-sm text-cyan-300">
            <i class="fas fa-rocket mr-2 neon-text"></i>
            PREDICTION : <span class="font-bold ml-2 neon-text-pink">${h.result} (${h.probability}%)</span>
        </div>
        ${h.status !== 'Pending' ? `
            <div class="flex items-center text-xs md:text-sm text-cyan-300">
                <i class="fas fa-check-circle mr-2 neon-text"></i>
                RESULT: <span class="font-bold ml-2 text-white">${h.apiResult || 'N/A'}</span>
            </div>
        ` : ''}
    </div>
`;

                fragment.appendChild(div);
            });
            
            requestAnimationFrame(() => {
                historyBody.innerHTML = '';
                historyBody.appendChild(fragment);
            });
        }

        // Optimized Analytics Update
        function updateAnalysis(result) {
            state.stats.totalBets++;
            if (result === "WIN") state.stats.totalWins++;
            else if (result === "LOSS") state.stats.totalLosses++;

            const winAccuracy = state.stats.totalBets === 0 ? 0 : ((state.stats.totalWins / state.stats.totalBets) * 100).toFixed(1);
            
            requestAnimationFrame(() => {
                $('winAccuracy').textContent = `${winAccuracy}%`;
                $('totalWins').textContent = state.stats.totalWins;
                $('totalLosses').textContent = state.stats.totalLosses;
                
                const winRateFill = $('winRateFill');
                if (winRateFill) winRateFill.style.width = `${winAccuracy}%`;
            });
        }
      
function generateQuantomPrediction() {
    const input = $('quantomInput').value.trim();
    const count = parseInt($('predictionCount').value);
    const output = $('quantomResult');
    const mode = $('resultType').value; // "bigsmall" or "redgreen"

    if (!/^\d{3}$/.test(input) || isNaN(count)) {
        output.innerHTML = '<p class="text-red-400">Please enter exactly 3 digits and select prediction count.</p>';
        return;
    }

    const startNumber = parseInt(input);
    const fragment = document.createDocumentFragment();

    // Fibonacci-based pseudo-random number generator
    function fibonacciRand(n, seed) {
        const mod = 1000;
        let a = seed % mod;
        let b = (seed * 2 + 1) % mod;
        let result = 0;
        for (let i = 0; i < n; i++) {
            result = (a + b) % mod;
            a = b;
            b = result;
        }
        return result % 100; // Return a number between 0–99
    }

    for (let i = 0; i < count; i++) {
        const number = startNumber + i;
        const fibRandom = fibonacciRand(i + 5, startNumber); // Fibonacci randomness

        let prediction = '';
        let numberPool = [];
        let colorClass = '';

        if (mode === 'bigsmall') {
            if (fibRandom % 10 >= 5) {
                prediction = 'BIG';
                numberPool = [5, 6, 7, 8, 9];
                colorClass = 'bg-blue-100 text-blue-600';
            } else {
                prediction = 'SMALL';
                numberPool = [0, 1, 2, 3, 4];
                colorClass = 'bg-red-100 text-red-600';
            }
        } else {
            if (fibRandom % 10 % 2 === 0) {
                prediction = 'GREEN';
                numberPool = [0, 2, 4, 6, 8];
                colorClass = 'bg-green-100 text-green-600';
            } else {
                prediction = 'RED';
                numberPool = [1, 3, 5, 7, 9];
                colorClass = 'bg-pink-100 text-pink-600';
            }
        }

        // Pick 2 unique numbers from the pool
        const nums = [...numberPool];
        const picked = [];
        while (picked.length < 2 && nums.length > 0) {
            const idx = fibonacciRand(i + picked.length + 1, number) % nums.length;
            picked.push(nums.splice(idx, 1)[0]);
        }

        const card = document.createElement('div');
        card.className = 'bg-white rounded-xl p-4 mb-4 shadow-md border-l-4 border-blue-500 text-center';

        card.innerHTML = `
            <div class="text-gray-800 text-base font-semibold mb-1">
                <i class="fas fa-fingerprint mr-1 text-gray-500"></i>${number}
            </div>
            <div class="inline-block px-4 py-1 mb-2 rounded-full text-sm font-bold ${colorClass}">
                ${prediction}
            </div>
            <div class="text-sm text-gray-700 font-medium">${picked.join(', ')}</div>
        `;

        fragment.appendChild(card);
    }

    output.innerHTML = '';
    output.appendChild(fragment);
}


        // Initialize Application with Performance Monitoring
        function initializeApp() {
            perfMonitor.mark('init-start');
            
            // Lazy load particles
            setTimeout(createOptimizedParticles, 500);
            
            // Start timer with RAF
            timerRAF = requestAnimationFrame(updatePeriodAndTimer);
            
            // Initialize displays
            updatePatternDisplay();
            updateAIDisplay();
            
            // Enable audio on first interaction
            document.addEventListener('click', initAudio, { once: true });
            
            // Preload critical resources
            const preloadLink = document.createElement('link');
            preloadLink.rel = 'prefetch';
            preloadLink.href = 'https://ckyjgfr.com/api/webapi/GetNoaverageEmerdList';
            document.head.appendChild(preloadLink);
            
            perfMonitor.mark('init-end');
            console.log(`App initialized in ${perfMonitor.measure('init', 'init-start')}ms`);
        }

        // Start application when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeApp);
        } else {
            initializeApp();
        }

        // Cleanup on page unload
        window.addEventListener('beforeunload', () => {
            if (timerRAF) {
                cancelAnimationFrame(timerRAF);
            }
            if (audioContext) {
                audioContext.close();
            }
        });

        // Performance monitoring in console
        if (typeof console !== 'undefined') {
            setTimeout(() => {
                console.log('Performance Report:', {
                    'Total Load Time': `${performance.now()}ms`,
                    'Cache Size': apiCache.size,
                    'History Length': state.history.length,
                    'Particles Active': particleCount,
                    'Memory Usage': navigator.deviceMemory ? `${navigator.deviceMemory}GB` : 'Unknown'
                });
            }, 3000);
        }
    </script>
</body>
</html>
